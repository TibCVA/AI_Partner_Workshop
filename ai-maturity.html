<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CVA | AI Maturity Assessment</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,300;400;500;600;700;800&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS with CVA Custom Config -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cva: {
                            navy: '#0B2438',
                            teal: '#00A1BF',
                            tealLight: '#00C6C6',
                            surface: '#F8FAFC',
                        }
                    },
                    fontFamily: {
                        sans: ['DM Sans', 'sans-serif'],
                        serif: ['Instrument Serif', 'serif'],
                    },
                    boxShadow: {
                        'card': '0 20px 50px -10px rgba(11, 36, 56, 0.12)'
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #F8FAFC; color: #0B2438; }
        .score-ring { background: conic-gradient(var(--c-teal) calc(var(--score) * 1%), #E2E8F0 0); }
        .fade-in { animation: fadeIn 0.5s cubic-bezier(0.19, 1, 0.22, 1) forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Navbar (Identical to Index) -->
    <nav class="fixed w-full z-[1000] bg-cva-navy/95 backdrop-blur-md shadow-lg border-b border-transparent">
        <div class="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-3 group">
                <span class="font-sans font-extrabold text-2xl tracking-tight text-white group-hover:text-cva-teal transition-colors">CVA</span>
                <span class="h-5 w-[1px] bg-white/20"></span>
                <span class="text-sm font-semibold tracking-wide text-white/80 uppercase">AI for Energy</span>
            </a>
            <div class="flex items-center gap-6">
                <span class="hidden md:inline text-xs text-white/50 uppercase tracking-widest font-bold">Assessment Tool v2.1</span>
                <a href="index.html" class="px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-xs font-bold rounded transition-all">Exit</a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="pt-32 pb-20 bg-cva-navy text-center px-6">
        <h1 class="font-serif text-4xl md:text-5xl text-white mb-4">Maturity Check</h1>
        <p class="text-white/60 max-w-xl mx-auto text-lg font-light">
            Measure your readiness to industrialise AI. <br>
            <span class="text-cva-teal font-medium">Business-centric. No technical jargon.</span>
        </p>
    </header>

    <!-- Main Tool -->
    <main class="flex-grow -mt-10 px-6 pb-24 relative z-10">
        <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-card border border-gray-100 overflow-hidden min-h-[500px]">
            
            <!-- Stepper -->
            <div class="bg-gray-50 border-b border-gray-200 p-6 flex items-center justify-between" id="stepperContainer">
                <div class="text-xs font-bold text-cva-teal uppercase tracking-widest" id="stepLabel">Context</div>
                <div class="flex gap-2" id="stepperDots"></div>
            </div>

            <!-- Content -->
            <div class="p-8 md:p-12">
                <div id="assessmentForm" class="fade-in"></div>
                <div id="resultsView" class="hidden fade-in"></div>
            </div>

            <!-- Footer -->
            <div class="bg-white border-t border-gray-100 p-6 flex justify-between items-center" id="formFooter">
                <button id="backBtn" class="text-sm font-bold text-gray-400 hover:text-cva-navy transition-colors disabled:opacity-0">‚Üê Back</button>
                <button id="nextBtn" class="px-8 py-3 bg-cva-teal hover:bg-cva-tealLight text-white font-bold rounded-xl shadow-lg transition-transform hover:-translate-y-0.5">
                    Next Step
                </button>
            </div>
        </div>
    </main>

    <!-- Logic -->
    <script>
        const config = {
            steps: [
                {
                    title: "Context",
                    questions: [
                        { id: 'role', label: "Your Role", type: 'select', options: ['Executive / Board', 'Business Unit Lead', 'Data/AI Lead', 'Strategy/Innovation'] },
                        { id: 'sector', label: "Sector", type: 'select', options: ['DSO / TSO', 'Utility (Gen + Retail)', 'Renewables / IPP', 'Energy Services'] }
                    ]
                },
                {
                    title: "Adoption & Value",
                    desc: "Do you have AI in production, and does it generate cash?",
                    dimension: 'adoption',
                    questions: [
                        { 
                            id: 'stage', 
                            label: "Operational Reality", 
                            help: "Be honest about what is actually running in day-to-day processes.",
                            type: 'radio',
                            options: [
                                { val: 0, text: "No active AI. We are at the 'Slide' stage." },
                                { val: 1, text: "Pilot Factory. Many POCs, but nothing industrialised." },
                                { val: 3, text: "Islands of AI. A few live models, but fragile maintenance." },
                                { val: 5, text: "Industrialised. AI embedded in core processes (e.g., Asset Mgt) with SLAs." }
                            ]
                        },
                        { 
                            id: 'value', 
                            label: "Value Tracking", 
                            help: "Can you prove the ROI to the CFO?",
                            type: 'radio',
                            options: [
                                { val: 0, text: "No measurement. We assume it works." },
                                { val: 2, text: "Technical metrics only (Accuracy, F1 Score)." },
                                { val: 5, text: "P&L Impact. We track FTEs saved, OPEX reduced, or Margin generated." }
                            ]
                        }
                    ]
                },
                {
                    title: "Risk & Governance",
                    desc: "Who decides, who controls, who is responsible?",
                    dimension: 'governance',
                    questions: [
                        { 
                            id: 'decision', 
                            label: "Decision Rights", 
                            help: "If a model fails, who is accountable?",
                            type: 'radio',
                            options: [
                                { val: 0, text: "Unclear. It's the 'Data Team's fault'." },
                                { val: 3, text: "Shared. Business owns the decision, IT owns the tool." },
                                { val: 5, text: "Codified. Clear matrices for validation, deployment, and kill-switch." }
                            ]
                        },
                        { 
                            id: 'risk', 
                            label: "Control Framework", 
                            help: "Do you treat AI like a critical industrial asset?",
                            type: 'radio',
                            options: [
                                { val: 0, text: "Ad-hoc. We check output manually sometimes." },
                                { val: 5, text: "Systematic. Automated guardrails, drift monitoring, and audit trails." }
                            ]
                        }
                    ]
                },
                {
                    title: "Industrial Capability",
                    desc: "Can you build, deploy, and maintain reliably?",
                    dimension: 'delivery',
                    questions: [
                        { 
                            id: 'data', 
                            label: "Data Access", 
                            help: "Is data a bottleneck?",
                            type: 'radio',
                            options: [
                                { val: 0, text: "Painful. Weeks to get a CSV extract." },
                                { val: 3, text: "Structured. Data Lake exists, but quality is uneven." },
                                { val: 5, text: "Productised. Documented Data Products with SLAs." }
                            ]
                        },
                        { 
                            id: 'reliability', 
                            label: "Maintenance & Updates", 
                            help: "What happens when the model needs an update?",
                            type: 'radio',
                            options: [
                                { val: 0, text: "Hero mode. One person knows how to fix it." },
                                { val: 5, text: "Factory mode. Automated pipelines (CI/CD) and non-regression tests." }
                            ]
                        }
                    ]
                }
            ]
        };

        let currentStep = 0;
        let answers = {};

        function renderStep() {
            const step = config.steps[currentStep];
            const container = document.getElementById('assessmentForm');
            const dots = document.getElementById('stepperDots');
            
            // Render Dots
            dots.innerHTML = config.steps.map((_, i) => 
                `<div class="w-2 h-2 rounded-full transition-colors ${i === currentStep ? 'bg-cva-teal' : 'bg-gray-200'}"></div>`
            ).join('');
            
            document.getElementById('stepLabel').innerText = step.title;

            let html = `
                <div class="mb-8">
                    <h2 class="font-serif text-3xl text-cva-navy mb-2">${step.title}</h2>
                    ${step.desc ? `<p class="text-gray-500">${step.desc}</p>` : ''}
                </div>
                <div class="space-y-8">
            `;

            step.questions.forEach(q => {
                html += `<div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                    <label class="block text-sm font-bold text-cva-navy uppercase tracking-wide mb-2">${q.label}</label>
                    ${q.help ? `<p class="text-xs text-gray-500 mb-4 italic">${q.help}</p>` : ''}
                `;

                if (q.type === 'select') {
                    html += `<select id="${q.id}" class="w-full p-3 rounded-lg border border-gray-300 bg-white" onchange="saveAnswer('${q.id}', this.value)">
                        <option value="">Select...</option>
                        ${q.options.map(o => `<option value="${o}" ${answers[q.id] === o ? 'selected' : ''}>${o}</option>`).join('')}
                    </select>`;
                } else if (q.type === 'radio') {
                    html += `<div class="space-y-3">`;
                    q.options.forEach(opt => {
                        const isChecked = answers[q.id] == opt.val ? 'checked' : '';
                        html += `
                            <label class="flex items-start gap-3 cursor-pointer group">
                                <input type="radio" name="${q.id}" value="${opt.val}" ${isChecked} class="mt-1 accent-cva-teal" onchange="saveAnswer('${q.id}', ${opt.val})">
                                <span class="text-sm text-gray-700 group-hover:text-cva-navy transition-colors">${opt.text}</span>
                            </label>
                        `;
                    });
                    html += `</div>`;
                }
                html += `</div>`;
            });
            html += `</div>`;
            container.innerHTML = html;

            document.getElementById('backBtn').disabled = currentStep === 0;
            document.getElementById('nextBtn').innerText = currentStep === config.steps.length - 1 ? "Analyze" : "Next";
        }

        window.saveAnswer = (id, val) => { answers[id] = val; };

        document.getElementById('nextBtn').addEventListener('click', () => {
            // Validate
            const step = config.steps[currentStep];
            const missing = step.questions.some(q => answers[q.id] === undefined);
            if (missing) { alert("Please answer all questions to get an accurate result."); return; }

            if (currentStep < config.steps.length - 1) {
                currentStep++;
                renderStep();
            } else {
                showResults();
            }
        });

        document.getElementById('backBtn').addEventListener('click', () => {
            if (currentStep > 0) { currentStep--; renderStep(); }
        });

        function calculateScore() {
            let total = 0;
            let max = 0;
            // Simple scoring logic based on radio values (0, 3, 5)
            // Steps 1, 2, 3 have scored questions. Step 0 is context.
            for (let i = 1; i < config.steps.length; i++) {
                config.steps[i].questions.forEach(q => {
                    total += parseInt(answers[q.id] || 0);
                    max += 5;
                });
            }
            return Math.round((total / max) * 100);
        }

        function showResults() {
            const score = calculateScore();
            let archetype, advice, priority;

            if (score < 40) {
                archetype = "The Pilot Factory";
                advice = "You have energy but no industrial traction. You are stuck in POC mode.";
                priority = "Stop launching new pilots. Pick ONE use case, sanctify the data, and push it to production with a real SLA.";
            } else if (score < 75) {
                archetype = "The Builder";
                advice = "You can build, but you struggle to scale safely. Risk is increasing.";
                priority = "Formalise governance. Define who owns the 'Kill Switch' and implement automated non-regression testing.";
            } else {
                archetype = "The Industrial Player";
                advice = "AI is becoming a core asset. The challenge is now portfolio optimization.";
                priority = "Focus on reuse. Build a 'Feature Store' to accelerate new use cases and monitor financial ROI per model.";
            }

            const html = `
                <div class="text-center fade-in">
                    <div class="inline-block p-1 px-3 rounded bg-cva-navy text-white text-xs font-bold uppercase tracking-widest mb-6">Results</div>
                    <h2 class="font-serif text-4xl text-cva-navy mb-2">You are: ${archetype}</h2>
                    <div class="text-6xl font-bold text-cva-teal mb-6">${score}<span class="text-2xl text-gray-400">/100</span></div>
                    
                    <div class="bg-gray-50 rounded-xl p-8 border border-gray-200 text-left mb-8">
                        <h3 class="font-bold text-cva-navy mb-2">Our Diagnosis</h3>
                        <p class="text-gray-600 mb-6 text-sm">${advice}</p>
                        
                        <h3 class="font-bold text-cva-teal mb-2">The Expert's Priority</h3>
                        <div class="flex gap-4 items-start">
                            <span class="text-2xl">üëâ</span>
                            <p class="text-cva-navy font-medium leading-relaxed">${priority}</p>
                        </div>
                    </div>

                    <div class="flex justify-center gap-4">
                        <button onclick="location.href='index.html#start'" class="px-8 py-3 bg-cva-navy text-white font-bold rounded-xl shadow-lg hover:bg-cva-blue transition-colors">
                            Discuss this Score
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('assessmentForm').classList.add('hidden');
            document.getElementById('formFooter').classList.add('hidden');
            document.getElementById('stepperContainer').classList.add('hidden');
            
            const rv = document.getElementById('resultsView');
            rv.innerHTML = html;
            rv.classList.remove('hidden');
        }

        // Init
        renderStep();
    </script>
</body>
</html>


